{{ 'ad-category.css' | asset_url | stylesheet_tag }}

{%- assign menu_handle = section.settings.menu -%}
{%- assign menu_obj = linklists[menu_handle] -%}

<div class="color-{{ section.settings.color_scheme }} ad-category section-{{ section.id }}">
  <div class="page-width">

    {%- if section.settings.heading != blank -%}
      <p class="ad-category__title">{{ section.settings.heading }}</p>
    {%- endif -%}

    {%- if menu_obj != blank and menu_obj.links.size > 0 -%}
      <div class="ad-category__bar" role="navigation" aria-label="{{ section.settings.heading | escape }}">
        {%- for link in menu_obj.links -%}
          {%- assign is_active = false -%}
          {%- if collection and collection.url == link.url -%}
            {%- assign is_active = true -%}
          {%- elsif request.path == link.url or request.path contains link.url -%}
            {%- assign is_active = true -%}
          {%- endif -%}

          <a
            class="ad-category__pill button {% if is_active %}button--primary{% else %}button--secondary{% endif %}"
            href="{{ link.url }}"
          >
            {{ link.title }}
          </a>
        {%- endfor -%}
      </div>
    {%- elsif request.design_mode -%}
      <div style="opacity:.8;">Select a menu in this sectionâ€™s settings.</div>
    {%- endif -%}

  </div>
</div>

{% schema %}
{
  "name": "AD - Category Buttons",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "FILTER BY CATEGORY"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-2"
    }
  ],
  "presets": [
    { "name": "AD - Category Buttons" }
  ]
}
{% endschema %}
